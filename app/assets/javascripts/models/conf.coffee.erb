config = (key)->
  ->
    @scope (all)->

    @default ->

    @deploy (o)->
      o["#{key}_id"] = o._id

    @map_reduce (o)->



Mem.conf = {}

<%
  for (key in confs) {
    var data = confs[key];
 %>
new Mem.Rule("<%= key %>").schema config("<%= key %>")
Mem.rule.<%- key %>.set <%- JSON.stringify(data) %>
Mem.conf.<%- key %> = Mem.<%- key %>s.hash()
<% } %>
