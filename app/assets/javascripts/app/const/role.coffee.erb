new Cache.Rule("role").schema ->
  @scope (all)->
    side: (side)->
      all.where({side})

  @default ->

  @deploy (o)->
    o.ables ||= []
    o.explain ||= ""

  @map_reduce (o)->


new Cache.Rule("able").schema ->
  @scope (all)->

  @default ->

  @deploy (o)->

  @map_reduce (o)->


new Cache.Rule("trap").schema ->
  @scope (all)->

  @default ->

  @deploy (o)->

  @map_reduce (o)->


Cache.rule.trap.set <%= JSON.generate SET_TRAPS %>
Cache.rule.role.set <%= JSON.generate SET_ROLES %>
Cache.rule.able.set <%= JSON.generate SET_ABLES %>
