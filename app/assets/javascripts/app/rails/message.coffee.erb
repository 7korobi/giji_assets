Cache.rule.item.set <%= JSON.generate MESSAGE.rails %>
if gon?.items?
  Cache.rule.item.merge gon.items

<% MESSAGE.module.rails.each do |name| %>
GUI.items_module "<%= name %>"
<% end %>


<%
{}.each do |key, log| %>
for item in Cache.items.where(log:"<%= key %>").list()
  item.log = <%= log.to_json %>
<% end %>



rule_accordion = (type)->
  GUI.if_exist "#rule-#{type}", (dom)->
    m.mount dom,
      controller: ->
      view: ->
        GUI.accordion type, RULE[type].list

rule_accordion "nation"
rule_accordion "village"
rule_accordion "maker"
rule_accordion "player"
